var addButton=document.querySelector(".add"),inputTask=document.getElementById("new-task"),unfinishedTasks=document.querySelector(".unfinished-tasks"),finishedTasks=document.querySelector(".finished-tasks");function createNewElement(e,n){var s=document.createElement("li"),t=document.createElement("button");t.className=n?"checkbox checkbox--checked":"checkbox";var a=document.createElement("label");a.innerText=e;var i=document.createElement("input");i.type="text",i.style.display="none";var l=document.createElement("button");l.className="edit",l.innerHTML="<svg class='to-do__icon' width='18' height='18'><use x='0' y='0' xlink:href='#icon-edit'></svg><span class='visually-hidden'>Редактировать</span>";var d=document.createElement("button");return d.className="remove",d.innerHTML="<svg class='to-do__icon' width='18' height='18'><use x='0' y='0' xlink:href='#icon-del'></svg><span class='visually-hidden'>Редактировать</span>",s.appendChild(t),s.appendChild(a),s.appendChild(i),s.appendChild(d),s.appendChild(l),s}function addTask(){if(inputTask.value){var e=createNewElement(inputTask.value,!1);unfinishedTasks.appendChild(e),bindTaskEvents(e,finishTask),inputTask.value=""}save()}function removeTask(){var e=this.parentNode;e.parentNode.removeChild(e),save()}function editTask(){var e=this,n=this.parentNode,s=n.querySelector("label"),t=n.querySelector('input[type="text"]');n.classList.contains("editMode")?(s.innerText=t.value,s.style.display="inline-block",t.style.display="none",e.className="edit",e.innerHTML="<svg class='to-do__icon' width='18' height='18'><use x='0' y='0' xlink:href='#icon-edit'></svg><span class='visually-hidden'>Редактировать</span>",save()):(t.value=s.innerText,s.style.display="none",t.style.display="inline-block",e.className="save",e.innerHTML="<svg class='to-do__icon' width='18' height='18'><use x='0' y='0' xlink:href='#icon-save'></svg><span class='visually-hidden'>Сохранить</span>"),n.classList.toggle("editMode")}function finishTask(){var e=this.parentNode;e.querySelector("button.checkbox").className="checkbox checkbox--checked",finishedTasks.appendChild(e),bindTaskEvents(e,unfinishTask),save()}function unfinishTask(){var e=this.parentNode;e.querySelector("button.checkbox").className="checkbox",unfinishedTasks.appendChild(e),bindTaskEvents(e,finishTask),save()}function bindTaskEvents(e,n){var s=e.querySelector("button.checkbox"),t=e.querySelector("button.edit"),a=e.querySelector("button.remove");s.onclick=n,t.onclick=editTask,a.onclick=removeTask}function save(){for(var e=[],n=0;n<unfinishedTasks.children.length;n++)e.push(unfinishedTasks.children[n].getElementsByTagName("label")[0].innerText);var s=[];for(n=0;n<finishedTasks.children.length;n++)s.push(finishedTasks.children[n].getElementsByTagName("label")[0].innerText);localStorage.removeItem("todo"),localStorage.setItem("todo",JSON.stringify({unfinishedTasks:e,finishedTasks:s}))}function load(){return JSON.parse(localStorage.getItem("todo"))}addButton.onclick=addTask;var data=load();