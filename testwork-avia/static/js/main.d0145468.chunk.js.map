{"version":3,"sources":["img/error_face.svg","img/loading.svg","api/api.js","redux/tickets-reducer.js","Components/Sidebar/Sidebar.js","helpFunctions/convertTime.js","Components/TicketsList/TicketsList.js","hoc/withTicketsFallback.js","common/preloader/preloader.js","Components/TicketsListContainer/TicketsListContainer.js","helpFunctions/throttle.js","App.js","serviceWorker.js","redux/redux-store.js","index.js"],"names":["module","exports","instance","axios","create","baseURL","ticketsAPI","get","id","initialState","tickets","searchId","filteredByStops","sorted","stop","maxSize","ticketsErrorResponse","isFetching","setTicketsFetchingCreator","boolean","type","ticketsReducer","state","action","error","sort","a","b","price","segments","duration","number","Sidebar","props","handleChange","bind","event","target","this","setFilterTicketsByStops","value","className","label","map","elem","key","Form","Check","custom","name","onChange","React","Component","connect","ticketsPage","dispatch","setFilterTicketsByStopsActionCreator","convertMinsToHrs","mins","format","h","Math","floor","m","convertToDouble","hours","minutes","countArrivalTime","startDate","newDate","Date","getTime","getHours","getMinutes","TicketsList","length","ticketStops","filter","ticket","stops","listItem","slice","offset","item","index","originName","origin","destinationName","destination","originStops","destinationStops","originStopsString","join","destinationStopsString","originFlyDuration","destinationFlyDuration","originLeavingDate","date","destinationLeavingDate","originLeavingTime","destinationLeavingTime","originArrivalDate","destinationArrivalDate","Card","Image","src","carrier","alt","mapStateToPropsForFilter","Preloader","preloader","width","TicketsListContainer","ticketsOffest","main","createRef","handleSort","handleScroll","getTicketsRequest","window","addEventListener","f","delay","isReady","lastArgs","lastThis","wrapper","args","apply","setTimeout","throttle","e","current","scrollHeight","offsetTop","innerHeight","pageYOffset","setState","prevState","sortTicketsByPrice","sortTicketsByDuration","ToggleButtonGroup","ToggleButton","variant","ref","compose","then","response","data","setTicketsCreator","setTicketsErrorResponse","status","FallbackComponent","errorFace","App","Boolean","location","hostname","match","reducers","combineReducers","store","createStore","applyMiddleware","ThunkMiddleware","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d0145468.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/error_face.bc5f6531.svg\";","module.exports = __webpack_public_path__ + \"static/media/loading.0662fe34.svg\";","import axios from \"axios\";\r\n\r\n\r\nconst instance = axios.create({\r\n    baseURL: \"https://front-test.beta.aviasales.ru\",\r\n})\r\n\r\nexport const ticketsAPI = {\r\n    getSearchId(){\r\n        return instance.get('/search');\r\n    },\r\n    getTickets(id){\r\n        return instance.get(`/tickets?searchId=${id}`);\r\n    },\r\n}","import {ticketsAPI} from \"../api/api\";\r\n\r\nconst SET_TICKETS = \"SET_TICKETS\";\r\nconst SET_TICKETS_ERROR_RESPONSE = \"SET_TICKETS_ERROR_RESPONSE\";\r\nconst SET_TICKETS_FETCHING = \"SET_TICKETS_FETCHING\";\r\nconst SET_SEARCH_ID = \"SET_SEARCH_ID\";\r\nconst SORT_TICKETS_BY_PRICE = \"SORT_TICKETS_BY_PRICE\";\r\nconst SORT_TICKETS_BY_DURATION = \"SORT_TICKETS_BY_DURATION\";\r\nconst SET_FILTER_TICKETS_BY_STOPS = \"SET_FILTER_TICKETS_BY_STOPS\";\r\n\r\nlet initialState = {\r\n    tickets: [],\r\n    searchId: \"\",\r\n    filteredByStops: \"\",\r\n    sorted: null,\r\n    stop: false,\r\n    maxSize: 10,\r\n    ticketsErrorResponse: null,\r\n    isFetching: false,\r\n}\r\n\r\nconst ticketsReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case SET_TICKETS:\r\n            return {\r\n                ...state,\r\n                tickets: action.tickets\r\n            }\r\n        case SET_TICKETS_ERROR_RESPONSE:\r\n            return {\r\n                ...state,\r\n                ticketsErrorResponse: action.error,\r\n            }\r\n        case SET_TICKETS_FETCHING:\r\n            return {\r\n                ...state,\r\n                isFetching: action.boolean,\r\n            }\r\n\r\n        case SET_SEARCH_ID:\r\n            return {\r\n                ...state,\r\n                searchId: action.id\r\n            }\r\n        case SORT_TICKETS_BY_PRICE:\r\n            return {\r\n                ...state,\r\n                sorted: \"cheap\",\r\n                tickets: state.tickets.sort((a,b)=>{\r\n                    return a.price - b.price;\r\n                })\r\n            }\r\n        case SORT_TICKETS_BY_DURATION:\r\n            return {\r\n                ...state,\r\n                sorted: \"fast\",\r\n                tickets: state.tickets.sort((a,b)=>{\r\n                    return a.segments[0].duration - b.segments[0].duration;\r\n                })\r\n            }\r\n        case SET_FILTER_TICKETS_BY_STOPS:\r\n            return {\r\n                ...state,\r\n                filteredByStops: action.number\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport const setTicketsCreator = (tickets) => ({type: SET_TICKETS, tickets});\r\n\r\nexport const setTicketsErrorResponse = (error)=> ({type: SET_TICKETS_ERROR_RESPONSE,error})\r\n\r\nexport const setSearchId = (id) => ({type: SET_SEARCH_ID, id});\r\n\r\nexport const getTicketsRequest = () => (dispatch) => {\r\n        ticketsAPI.getSearchId()\r\n        .then(response=>response.data.searchId)\r\n        .then(id=>{\r\n            dispatch(setTicketsFetchingCreator(true));\r\n            return ticketsAPI.getTickets(id)\r\n        })\r\n        .then(response=>{\r\n            let tickets = response.data.tickets;\r\n            dispatch(setTicketsCreator(tickets));\r\n            dispatch(setTicketsFetchingCreator(false));\r\n        },error => {dispatch(setTicketsErrorResponse(error.response.status))})\r\n\r\n}\r\n\r\nexport const sortTicketsByPriceActionCreator = ()=>({type:SORT_TICKETS_BY_PRICE});\r\n\r\nexport const sortTicketsByDurationActionCreator = ()=>({type:SORT_TICKETS_BY_DURATION});\r\n\r\nexport const setFilterTicketsByStopsActionCreator = (number)=> ({type:SET_FILTER_TICKETS_BY_STOPS,number});\r\n\r\nexport const setTicketsFetchingCreator = (boolean) => ({type: SET_TICKETS_FETCHING,boolean});\r\n\r\nexport default ticketsReducer;","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    setFilterTicketsByStopsActionCreator,\r\n} from \"../../redux/tickets-reducer\";\r\nimport {Form} from \"react-bootstrap\";\r\n\r\n\r\nclass Sidebar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this)\r\n    }\r\n\r\n\r\n    handleChange(event){\r\n        let target = event.target;\r\n        this.props.setFilterTicketsByStops(target.value);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <aside className=\"Tickets__filter text-left p-4 mt-2 shadow-sm bg-white rounded\">\r\n                <h5>КОЛИЧЕСТВО ПЕРЕСАДОК</h5>\r\n                {[\r\n                    {value:\"\",label:\"Все\"},\r\n                    {value:0,label:\"Без персадок\"},\r\n                    {value:1,label:\"1 пересадка\"},\r\n                    {value:2,label:\"2 пересадки\"},\r\n                    {value:3,label:\"3 пересадки\"},].map(elem => (\r\n                    <div key={elem.value}>\r\n                        <Form.Check\r\n                            custom\r\n                            type=\"radio\"\r\n                            name=\"stops\"\r\n                            id={`custom-radio-${elem.value}`}\r\n                            value={elem.value}\r\n                            label={elem.label}\r\n                            onChange={this.handleChange}\r\n                        />\r\n                    </div>\r\n                ))\r\n                }\r\n            </aside>\r\n        )\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n    filteredByStops: state.ticketsPage.filteredByStops,\r\n})\r\n\r\nlet mapDispatchToProps = (dispatch)=>({\r\n    setFilterTicketsByStops: (number)=> {dispatch(setFilterTicketsByStopsActionCreator(number))}\r\n})\r\n\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Sidebar);","export function convertMinsToHrs(mins,format) {\r\n    let h = (Math.floor(mins / 60));\r\n    let m = mins % 60;\r\n    if (format === \"dotted\") {\r\n        return convertToDouble(h,m);\r\n    }\r\n    if (format === \"hm\") {\r\n        return `${h}ч ${m}м`;\r\n    }\r\n    return `${h}h ${m}m`;\r\n}\r\n\r\nexport function convertToDouble(hours,minutes) {\r\n    hours = hours < 10 ? '0' + hours : hours;\r\n    minutes = minutes < 10 ? '0' + minutes : minutes;\r\n    return `${hours}:${minutes}`;\r\n}\r\n\r\nexport function countArrivalTime(startDate,minutes) {\r\n    let newDate = new Date(startDate.getTime() + minutes * 60000);\r\n    return convertToDouble(newDate.getHours(),newDate.getMinutes())\r\n}\r\n\r\n","import React from \"react\";\r\nimport {Card,Image} from \"react-bootstrap\";\r\nimport {convertMinsToHrs, convertToDouble, countArrivalTime} from \"../../helpFunctions/convertTime\";\r\n\r\nconst TicketsList = (props) => {\r\n\r\n    let tickets = props.tickets;\r\n\r\n    if ((props.filteredByStops !== \"\") && tickets.length) {\r\n        const ticketStops = +props.filteredByStops;\r\n        tickets = [...props.tickets.filter(ticket => ticket.segments[0].stops.length === ticketStops && ticket.segments[1].stops.length === ticketStops)];\r\n        }\r\n\r\n        const listItem = tickets.slice(0,props.offset).map((item,index)=>{\r\n        const originName = item.segments[0].origin;\r\n        const destinationName = item.segments[1].destination;\r\n\r\n        const originStops = item.segments[0].stops;\r\n        const destinationStops = item.segments[1].stops;\r\n\r\n        const originStopsString = originStops.join(\", \");\r\n        const destinationStopsString = destinationStops.join(\", \");\r\n\r\n        const originFlyDuration = item.segments[0].duration;\r\n        const destinationFlyDuration = item.segments[1].duration;\r\n\r\n        const originLeavingDate = new Date(item.segments[0].date);\r\n        const destinationLeavingDate = new Date(item.segments[1].date);\r\n\r\n        const originLeavingTime = convertToDouble(originLeavingDate.getHours(),destinationLeavingDate.getMinutes());\r\n        const destinationLeavingTime = convertToDouble(destinationLeavingDate.getHours(),destinationLeavingDate.getMinutes());\r\n\r\n        const originArrivalDate = countArrivalTime(originLeavingDate,originFlyDuration);\r\n        const destinationArrivalDate = countArrivalTime(destinationLeavingDate,destinationFlyDuration);\r\n\r\n        return (\r\n            <Card key={index} className=\"mt-4 p-4 shadow-sm\">\r\n                <div className=\"ticket__container\">\r\n                    <div className=\"ticket__head row\">\r\n                        <h3 className=\"ticket__price col-6 text-left text-primary\">{item.price}<span className=\"price__currency\"> Р</span></h3>\r\n                        <div className=\"ticket__ship-info col-6 text-right\"><Image src={`http://pics.avs.io/99/36/${item.carrier}.png`} className=\"\" alt={item.carrier}/></div>\r\n                    </div>\r\n                    <div className=\"ticket__table\">\r\n                        <div className=\"ticket__to row\">\r\n                            <div className=\"table__tr col text-left\">\r\n                                <div className=\"ticket__headline text-secondary text-grey\">\r\n                                    {originName} - {destinationName}\r\n                                </div>\r\n                                <div className=\"table__td\">\r\n                                    {originLeavingTime} - {originArrivalDate}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"table__tr col\">\r\n                                <div className=\"ticket__headline text-secondary text-grey\">\r\n                                    В пути\r\n                                </div>\r\n                                <div className=\"table__td\">\r\n                                    {convertMinsToHrs(originFlyDuration,\"hm\")}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"table__tr col text-right\">\r\n                                <div className=\"ticket__headline text-secondary text-grey\">\r\n                                    Пересадки: {originStops.length ? originStops.length : \"\"}\r\n                                </div>\r\n                                <div className=\"table__td\">\r\n                                    {originStops.length ? originStopsString : \"Без пересадок\"}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"ticket__back row\">\r\n                            <div className=\"table__tr col text-left\">\r\n                                <div className=\"ticket__headline text-secondary text-grey\">\r\n                                    {destinationName} - {originName}\r\n                                </div>\r\n                                <div className=\"table__td\">\r\n                                    {destinationLeavingTime} - {destinationArrivalDate}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"table__tr col\">\r\n                                <div className=\"ticket__headline text-secondary text-grey\">\r\n                                    В пути\r\n                                </div>\r\n                                <div className=\"table__td\">\r\n                                    {convertMinsToHrs(destinationFlyDuration,\"hm\")}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"table__tr col text-right\">\r\n                                <div className=\"ticket__headline text-secondary text-grey\">\r\n                                    Пересадки: {destinationStops.length ? destinationStops.length : \"\"}\r\n                                </div>\r\n                                <div className=\"table__td\">\r\n                                    {destinationStops.length ? destinationStopsString : \"Без пересадок\"}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Card>\r\n        )\r\n    });\r\n    return (\r\n        <>\r\n            {listItem}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default TicketsList;","import React from 'react'\r\nimport {connect} from \"react-redux\";\r\nimport errorFace from \"../img/error_face.svg\"\r\n\r\nlet mapStateToPropsForFilter = (state)=> ({\r\n    ticketsErrorResponse: state.ticketsPage.ticketsErrorResponse,\r\n})\r\n\r\nexport const withTicketsFallback = (Component)=> {\r\n    class FallbackComponent extends React.Component {\r\n        render() {\r\n            if (this.props.ticketsErrorResponse !== null) {\r\n                return (\r\n                    <div className=\"fallback vh-100 bg-white\">\r\n                        <div className=\"fallback__message\">\r\n                            <h4>Something went wrong</h4>\r\n                            <img src={errorFace} width=\"60\" alt=\"\"/>\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n            return <Component {...this.props}/>\r\n        }\r\n    }\r\n    return connect(mapStateToPropsForFilter)(FallbackComponent)\r\n}","import preloader from '../../img/loading.svg';\r\nimport React from 'react'\r\n\r\n\r\nlet Preloader = (props)=> {\r\n    return (\r\n        <div className=\"mt-4 mb-4 bg-white\">\r\n            <img src={preloader} width=\"70\" alt=\"\"/>\r\n        </div>\r\n    )\r\n}\r\nexport default Preloader","import React from \"react\";\r\nimport {ToggleButton, ToggleButtonGroup} from \"react-bootstrap\";\r\nimport {\r\n    getTicketsRequest,\r\n    sortTicketsByPriceActionCreator,\r\n    sortTicketsByDurationActionCreator,\r\n} from \"../../redux/tickets-reducer\";\r\nimport {connect} from \"react-redux\";\r\nimport TicketsList from \"../TicketsList/TicketsList\";\r\nimport {compose} from \"redux\";\r\nimport {withTicketsFallback} from \"../../hoc/withTicketsFallback\";\r\nimport Preloader from \"../../common/preloader/preloader\";\r\nimport {throttle} from \"../../helpFunctions/throttle\"\r\n\r\nclass TicketsListContainer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            ticketsOffest: this.props.maxSize,\r\n        }\r\n        this.main = React.createRef();\r\n        this.handleSort = this.handleSort.bind(this);\r\n        this.handleScroll = this.handleScroll.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.getTicketsRequest();\r\n        window.addEventListener('scroll', throttle(this.handleScroll, 40))\r\n    }\r\n\r\n    handleScroll(e){\r\n        const main = this.main.current;\r\n        const mainHeight = (main.scrollHeight + main.offsetTop);\r\n        const mainPosition = window.innerHeight + window.pageYOffset;\r\n        if ((mainHeight - mainPosition) === 0) {\r\n            this.setState(prevState=>({ticketsOffest: prevState.ticketsOffest + this.props.maxSize}))\r\n        }\r\n    }\r\n\r\n    handleSort(e){\r\n        let target = e.target;\r\n        if (this.props.sorted !== target.value) {\r\n            if (target.value === \"cheap\") {\r\n                this.props.sortTicketsByPrice();\r\n            }\r\n\r\n            if (target.value === \"fast\") {\r\n                this.props.sortTicketsByDuration();\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <ToggleButtonGroup type=\"radio\" name=\"sort\" className=\"shadow-sm w-100\">\r\n                    <ToggleButton variant=\"light\" value=\"cheap\" onChange={this.handleSort}>Самый дешёвый</ToggleButton>\r\n                    <ToggleButton variant=\"light\" value=\"fast\" onChange={this.handleSort}>Самый быстрый</ToggleButton>\r\n                </ToggleButtonGroup>\r\n                <div className=\"Tickets__list\" ref={this.main}>\r\n                    <TicketsList tickets={this.props.tickets} offset={this.state.ticketsOffest} filteredByStops={this.props.filteredByStops} maxSize={this.props.maxSize}/>\r\n                    {(this.props.isFetching) ? <Preloader/> : null}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => ({\r\n    tickets: state.ticketsPage.tickets,\r\n    filteredByStops: state.ticketsPage.filteredByStops,\r\n    sorted: state.ticketsPage.sorted,\r\n    maxSize: state.ticketsPage.maxSize,\r\n    isFetching: state.ticketsPage.isFetching,\r\n})\r\n\r\nlet mapDispatchToProps = (dispatch)=>({\r\n    getTicketsRequest: ()=> {dispatch(getTicketsRequest())},\r\n    sortTicketsByPrice: ()=>{dispatch(sortTicketsByPriceActionCreator())},\r\n    sortTicketsByDuration: ()=>{dispatch(sortTicketsByDurationActionCreator())},\r\n})\r\n\r\nexport default compose(\r\n    connect(mapStateToProps,mapDispatchToProps),\r\n    withTicketsFallback,\r\n)(TicketsListContainer);","export function throttle(f, delay) {\r\n    let isReady = true;\r\n    let lastArgs = null;\r\n    let lastThis = null;\r\n    return function wrapper(...args) {\r\n        if (!isReady) {\r\n            lastArgs = args;\r\n            lastThis = this;\r\n            return;\r\n        }\r\n        f.apply(this, args);\r\n        isReady = false;\r\n        lastThis = null;\r\n        lastArgs = null;\r\n        setTimeout(() => {\r\n            isReady = true;\r\n            if (lastArgs) {\r\n                wrapper.apply(lastThis, lastArgs);\r\n            }\r\n        }, delay);\r\n    }\r\n}","import React from 'react';\nimport './App.css';\nimport Sidebar from \"./Components/Sidebar/Sidebar\";\nimport TicketsListContainer from \"./Components/TicketsListContainer/TicketsListContainer\";\n\nfunction App() {\n  return (\n    <div className=\"App container-fluid\">\n      <div className=\"row limit\">\n          <div className=\"col-lg-3\"><Sidebar/></div>\n          <div className=\"col-lg-9\"><TicketsListContainer/></div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import ticketsReducer from \"./tickets-reducer\";\r\nimport {applyMiddleware, combineReducers, createStore} from \"redux\";\r\nimport ThunkMiddleware from \"redux-thunk\";\r\n\r\n\r\nlet reducers = combineReducers({\r\n    ticketsPage: ticketsReducer,\r\n})\r\n\r\nlet store = createStore(reducers,applyMiddleware(ThunkMiddleware));\r\n\r\nwindow.store = store;\r\n\r\nexport default store","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {BrowserRouter} from \"react-router-dom\";\nimport {Provider} from \"react-redux\";\nimport store from \"./redux/redux-store\";\n\nReactDOM.render(\n    <BrowserRouter>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </BrowserRouter>\n    , document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}